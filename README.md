# WB Demo Project (Go)

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.  
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **NATS Streaming**, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ **PostgreSQL**, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

---

# –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª `orders` –≤ **NATS Streaming**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö **PostgreSQL**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ (in-memory cache) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–∏—Å–∞
- HTTP API:
  - `GET /order/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑ –ø–æ ID
  - `GET /order/all` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–∏—Å–∫–æ–º –∑–∞–∫–∞–∑–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π –≤ popup-–æ–∫–Ω–µ
- –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã

---

# üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª / –ü–∞–ø–∫–∞      | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
| ----------------- | -------------------------------------------------- |
| `main.go`         | –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å (HTTP + NATS + PostgreSQL + Cache) |
| `publisher.go`    | –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ NATS Streaming     |
| `db/init.sql`     | SQL-—Å—Ö–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `orders`            |
| `web/index.html`  | –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–∫–∞–∑–æ–≤                |
| `web/style.css`   | –°—Ç–∏–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞                                    |
| `model.json`      | –ü—Ä–∏–º–µ—Ä JSON –∑–∞–∫–∞–∑–∞                                 |
| `main_test.go`    | –ú–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞                            |
| `service_test.go` |                                                    |

---

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

1. **–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ PostgreSQL –∏ NATS Streaming (Stan)** –ª–æ–∫–∞–ª—å–Ω–æ.
   nats-streaming-server.exe -p 4222 -m 8222 -hbi 5s -hbt 5s -hbf 2 -SD -cid test-cluster

2. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∞–±–ª–∏—Ü—ã:**

   ```bash
   psql -h localhost -U postgres -c "CREATE DATABASE wb_demo;"
   psql -h localhost -U postgres -d wb_demo -f db/init.sql
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   export DSN="postgres://postgres:2212@localhost:5432/wb_demo?sslmode=disable"
   export NATS_CLUSTER="test-cluster"

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å**
   go run main.go

5. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä –∑–∞–∫–∞–∑–∞ –≤ NATS Streaming:**
   go run publisher.go

6. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   http://localhost:8080
